# Quick Start Guide - Forum Messaging

## Step 1: Run the Migration

Choose ONE of these methods:

### Method A: Using .NET CLI (Recommended)
```bash
dotnet ef database update
```

### Method B: Using Package Manager Console in Visual Studio
```powershell
Update-Database
```

### Method C: Run SQL Script Manually
Execute the SQL script in `StudyGroupMessages_Table_Creation.sql` against your MySQL database.

## Step 2: Rebuild the Project
```bash
dotnet build
```

## Step 3: Run the Application
```bash
dotnet run
```

## Step 4: Test Real-Time Messaging

1. **Navigate to a Study Group:**
   - Go to "My Study Groups"
   - Click on any study group where you are an approved member

2. **Open Forum Tab:**
   - Click on the "Forum" tab in the study group details page

3. **Test Single Browser:**
   - Type a message in the text area
   - Click "Post Message"
   - Message should appear immediately below

4. **Test Real-Time (Multiple Browsers):**
   - Open the same study group page in TWO different browsers
   - Log in as different approved members in each browser
   - Post a message from Browser 1
   - **VERIFY:** Message appears instantly in Browser 2 WITHOUT refresh!

5. **Test Message Deletion:**
   - Click the trash icon on your own message
   - Confirm deletion
   - **VERIFY:** Message disappears from all connected browsers instantly

## Expected Behavior

### ? What Should Work:
- Messages appear instantly without page refresh
- All approved members see messages in real-time
- Owners/Admins can delete any message
- Members can delete their own messages
- Connection automatically reconnects if lost
- Messages persist in database

### ? What Should NOT Work (Security):
- Non-members cannot post or view messages
- Non-approved members cannot post messages
- Regular members cannot delete others' messages

## Browser Console Check

Open browser developer tools (F12) and check the Console tab. You should see:
```
SignalR Connected
Joined study group: [studyGroupId]
```

If you see connection errors, check:
1. Is the application running?
2. Are you logged in?
3. Are you an approved member of the study group?

## Troubleshooting

### "No messages yet" even after posting:
- Check browser console for errors
- Verify you're an approved member
- Check if migration was applied: Look for `StudyGroupMessages` table in database

### SignalR connection errors:
- Ensure application is running on correct port
- Check firewall settings
- Verify SignalR is configured in `Program.cs`

### Messages not syncing between browsers:
- Verify both users are approved members
- Check network connection
- Look for JavaScript errors in console

## Technical Details

**Hub Endpoint:** `/studyGroupHub`
**Message Max Length:** 5000 characters
**Default Messages Per Load:** 50

## Quick Commands Reference

```bash
# Create new migration (if needed)
dotnet ef migrations add AddStudyGroupMessagesTable

# Apply migration
dotnet ef database update

# Rollback migration (if needed)
dotnet ef database update [PreviousMigrationName]

# Remove last migration (if not applied)
dotnet ef migrations remove

# Build project
dotnet build

# Run project
dotnet run

# Run with watch (auto-reload)
dotnet watch run
```

## Success Checklist

- [ ] Migration applied successfully
- [ ] Project builds without errors
- [ ] Application runs without errors
- [ ] Can navigate to study group details page
- [ ] Forum tab is visible
- [ ] Can post a message
- [ ] Message appears immediately
- [ ] Message persists after page refresh
- [ ] Multiple browsers show messages in real-time
- [ ] Can delete own messages
- [ ] Owner/Admin can delete any message

---

**You're all set!** The real-time forum messaging system is now fully operational. ??
